# Конструкторы
Конструктор в IL-коде обозначается как .ctor. По сути это метод, который задает значения в новом экземпляре текущего класса.
При создании экземпляра объекта ссылочного типа выделяется память для полей данных экземпляра и инициализируются служебные поля
(указатель на объект-тип и индекс блока синхронизации), после чего вызывается конструктор экземпляра, устанавливающий
исходное состояние нового объекта.
**Перед вызовом конструктора все числовые значимые переменные получают значения 0, а все ссылочные типы null.**</br>
*Эмпирическим путем удалось выяснить, что если в классе есть структура и вызывается конструктор по умолчанию, то ко всем полям струтуры будет применено то же правило, что и к полям класса.*
*Также эмпирическим путем удалось выяснить, что создать рекурсивную структуру нельзя, что радует.*
## Значение по умолчанию в классе
В C# можно задать значения для переменных по умолчанию.
При генерации IL-кода конструктора объекта, в котором есть поля со значениями по умолчанию, сначала полям присваивается значения по умолчанию.
Затем вызывается конструктор базового класса:
- Если объект не наследуется - вызывается конструктор Object();
- Если объект наследуется, но не вызывает явно конструктор базового класса - вызывается конструктор базового класса по умолчанию, т.е. конструктор без аргументов.
- Если конструктор указан явно - вызывается явно указанный конструктор (в написании данного пункта помог капитан Очевидность).
## Конструкторы структур
Особенности конструкторов структур:
1. У структур не может быть конструкторов без параметров;
2. Все поля структуры должны быть определены в теле конструктора;
3. Компилятор C# автоматически создает конструктор для структуры по умолчанию. В этом конструкторе всем числовым типам присваивается значение 0, а ссылочным null.

## Конструктор типа (Статический конструктор)
.cctor - конструктор, который вызывается только одни раз *(по крайней мере CLR пытается это контролировать)*
при обращении к классу.</br>
Статический конструктор может переопределить значения статических переменных, если они уже были инициализированы.

## Перегружаемые операторы
**public static [Type] operator [operator](Type val1, Type val2) - перегрузка операторов**
**public static explicit operator Type(CurrentType val1) - явное преобразование**
**public static implicit operator CurrentType(Type val1) - неявное приобразование**
[!Перегружаемые операторы](./imgReadme/ops_1.png)
[!Перегружаемые операторы](./imgReadme/ops_2.png)
[!Перегружаемые операторы](./imgReadme/ops_3.png)

## Методы расширения
Методы расширения предназначены для добавления пользовательских методов к закрытому типу.</br>
**public static ReturnType MethodName(this TypeForExtension, [args]){}.**
**Метод расширения необходимо объявлять в статическом классе первого уровня.**
Методы расширения можно применять для типов делегатов.
Также можно передать в качестве значения делегата типа Action вызов метода расширения.

## Частичные методы
Частичный метод - метод, реализацию которого можно определить в нескольких файлах.</br>
Правила:
- Частичные методы могут объявляться только внутри частичного класса или структуры.
- Частичные методы дожны возвращать void и не должны принимать out.
